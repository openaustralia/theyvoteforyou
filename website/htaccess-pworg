# htaccess file for publicwhip.org.uk
# Rename it to .htaccess for use

# ghastly hack to run each PHP script under one persistent PHP fastcgi server.
# see http://www.mythic-beasts.com/support/topic_php.html#fastcgi
AddType application/x-httpd-fastphp .php
Action application/x-httpd-fastphp /fcgi/php

<FilesMatch "^(mp-info.xml|dreamquery.xml|mpdream-info.xml)$">
    AddHandler application/x-httpd-fastphp .xml
</FilesMatch>
Options ExecCGI
DirectoryIndex index.php

# make things safe
php_flag register_globals off
<Files ~ "\.inc$">
    Order allow,deny
    Deny from all
</Files>

# all links on publicwhip.org.uk are permalinks
# this lets us move pages without breaking them
RedirectPermanent /rebels.php http://www.publicwhip.org.uk/mps.php?sort=rebellions
RedirectPermanent /news.php http://www.publicwhip.org.uk/newsletters/archive.php
RedirectPermanent /code.php http://www.publicwhip.org.uk/project/code.php
RedirectPermanent /mp-info.xml http://www.publicwhip.org.uk/feeds/mp-info.xml


# Net strike
#Options +FollowSymLinks
#RewriteEngine On
#RewriteCond %{REQUEST_URI} !^/patents/patents\.php
#RewriteCond %{REQUEST_URI} !^/thepublicwhip\.gif
#RewriteCond %{REQUEST_URI} !^/publicwhip\.css
#RewriteCond %{REQUEST_URI} !^/mp-info.xml
#RewriteRule .*          http://www.publicwhip.org.uk/patents/patents.php [R=302,L]

# This one worked in the end:
#RewriteEngine On
#RewriteRule /(.+).php /patents/index.html [R]

#Alternative way of net striking:
#RedirectMatch /[^p] http://www.publicwhip.org.uk/patents/patents.php




